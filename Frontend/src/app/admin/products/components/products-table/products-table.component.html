<table mat-table [dataSource]="dataSource" class="common-table mat-elevation-z1">
  @for(column of tableService.columns; track column) {
    <ng-container [matColumnDef]="column.index" [class]="'col-' + column.type">
      <th mat-header-cell *matHeaderCellDef> {{ column.title }} </th>
      <td mat-cell *matCellDef="let element">
        @switch(column.type) {
          @case(columnTypeEnum.action) {
            <button mat-icon-button class="btn-pencil-icon" (click)="doAction(element)" matTooltip="Edit">
              <mat-icon>edit</mat-icon>
            </button>
            <button mat-icon-button class="btn-danger-icon" (click)="delete(element)" matTooltip="Delete">
              <mat-icon>delete</mat-icon>
            </button>
          }
          @case(columnTypeEnum.date) {
            <span>{{element[column.index] | date: 'd MMM yyyy | HH:mm'}}</span>
          }
          @case(columnTypeEnum.image) {
            <img class="img-thumb" [src]="element[column.index]" alt="product">
          }
          @case(columnTypeEnum.list) {
            @for(item of element[column.index]; track item){
              {{item.size ?? item.name}}
            }
          }
          @default {
            {{element[column.index]}}
          }
        }
      </td>
    </ng-container>
  }
  <tr mat-header-row *matHeaderRowDef="tableService.displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: tableService.displayedColumns;"></tr>
</table>

<mat-paginator [pageSizeOptions]="tableService.pageSizeOptions" showFirstLastButtons></mat-paginator>
